\section{Anexo C: Comandos del AD}

El conversor analogico digital tiene 2 modos de trabajo bien definidos, modo PC y modo AD. 
Los modos son configurados con el bit cero, del byte de control.
En modo PC se pueden realizar 2 acciones principales: la configuracion general y la extraccion de los datos.
En modo AD, el conversor se pone en espera del pulso 5 para realizar la conversion de los datos para una posterior extraccion por parte del usuario, lo cual requiere volver al modo PC.

El buffer de adquisicion es variable en bloques de $64*16*2^{i}$ bytes con $0 \leq i \leq 7$, la eleccion
del bloque se hace con los bits 4,5,6 del byte de control.
Se debe reiniciar el contador de direcciones de buffer antes de una conversion a su valor por defecto,
esto se hace por medio del bit 7 del btye de control.

Existen 2 modos de adquisicion, por pulsacion y continuo, en este trabajo utilizamos el continuo por 
medio del bit 1 del byte de control.

Los bits 3 y 4 del byte de control son sin cuidado y su valor es puesto en cero.

Es posible determinar el estado de conversion por medio del comando de estado, el cual responde
con un byte donde el valor del primer bit indicara en cero el fin de la adquisicion.

La configuracion del intervalo de adquisiscion se hace por medio del comando el cual se expresa
con un byte y cuyo valor responde a la formula explicada en la seccion AD del presente trabajo.

La obtencion de los datos del buffer de adquisicion requiere el reset del contador antes de la 
ejecucion del comando de obtencion de datos, el cual tiene como parametro la direccion del 
buffer y se obtiene como respuesta un arreglo contiguo de bytes previamente configurado. 



\begin{itemize}
\item comando de control: \begin{verbatim}['r'][0x0B][byte de control]\end{verbatim}
\item comando de estado: \begin{verbatim}['S'][0x0B][intervalo]\end{verbatim}
\item comando de configuracion de intervalo: \begin{verbatim}['t'][0x0C][byte ts]\end{verbatim}
\item comando de extraccion de adquisisciones: \begin{verbatim}['X'][OxO9|0x0A|0x0B][0x00]\end{verbatim}
\end{itemize}

\newpage